# ======================================
# Core API Infrastructure - Docker Compose Environment
# ======================================
# Copy this file to .env and fill in your values
# IMPORTANT: Never commit .env to version control!
#
# This file is used by docker-compose.yml for container configuration.
# The backend/.env.example is used for local development.
#
# Stories:
#   - STORY-012: Environment Configuration
#   - STORY-021A: API-Basis-Infrastruktur (NestJS Setup)
#   - STORY-024A: PostgreSQL Database Setup
#   - STORY-024B: PostgreSQL Schema & Migrations
#   - STORY-026A: MinIO Setup (S3-compatible object storage)

# ----------------
# Application Environment
# ----------------
NODE_ENV=development

# ----------------
# CORS & Frontend (STORY-021A)
# ----------------
# Frontend URL for CORS (allows requests from this origin)
FRONTEND_URL=http://localhost:3000

# ----------------
# Rate Limiting (STORY-021A)
# ----------------
# Rate limit window in milliseconds (60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000
# Maximum requests per rate limit window
RATE_LIMIT_MAX_REQUESTS=100

# ----------------
# Database (PostgreSQL) - STORY-024A
# ----------------
# These values are used by the postgres container (POSTGRES_*) and backend (DB_*)
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=core_app

# Backend database connection settings
DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_secure_password_here
DB_NAME=core_app
DB_SSL=false

# Connection Pool Settings
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT_MS=30000
DB_POOL_CONNECTION_TIMEOUT_MS=2000

# ----------------
# JWT Authentication
# ----------------
JWT_SECRET=your_super_secret_jwt_key_here_min_32_chars
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=30d

# ----------------
# Email (Resend.com) - STORY-023A
# ----------------
# Resend API key (starts with 're_') - Get from https://resend.com/api-keys
RESEND_API_KEY=re_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
# Email sender display name
EMAIL_FROM_NAME=Core Application
# Email sender address (must be verified in Resend dashboard)
EMAIL_FROM_ADDRESS=noreply@yourdomain.com
# Support email for internal notifications (optional, defaults to EMAIL_FROM_ADDRESS)
SUPPORT_EMAIL=support@yourdomain.com
# Maximum retry attempts for failed emails (default: 3)
EMAIL_MAX_RETRIES=3
# Delay between retries in milliseconds (default: 1000)
EMAIL_RETRY_DELAY_MS=1000

# ----------------
# Logging
# ----------------
LOG_LEVEL=info

# ----------------
# MinIO Object Storage (STORY-026A)
# ----------------
# MinIO root user/password - used by MinIO container
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# MinIO connection settings for backend
# For Docker: use 'minio' (service name)
# Leave MINIO_ENDPOINT empty to disable storage features
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin

# Bucket configuration
MINIO_BUCKET_UPLOADS=uploads
MINIO_BUCKET_LOGOS=logos
MINIO_BUCKET_FEEDBACK=feedback

# Health check timeout (milliseconds)
STORAGE_CHECK_TIMEOUT=5000
